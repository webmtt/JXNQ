(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24fca6de"],{"06b1":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"app-container accountManage",staticStyle:{height:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(56, 61, 65, 0.8)"}},[s("div",{staticStyle:{"text-align":"right",padding:"0 0 10px 0"}},[s("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.addOrEditUserBox()}}},[e._v("新建")]),e._v(" "),s("el-button",{attrs:{size:"small",disabled:!e.isBatchSelected,type:"success"},on:{click:e.batchDelete}},[e._v("批量删除")])],1),e._v(" "),s("el-table",{ref:"tableList",attrs:{data:e.list,height:e.tableHeight,border:"",size:"small",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{align:"center",type:"selection",label:"选择",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.getIndex(t.$index))+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",width:"150",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(["超级管理员","普通用户"][t.row.user_type])+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"账号名称",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.user_name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"单位",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.organization||"-")+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{"class-name":"status-col",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.transformDataTime(t.row.regtime))+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.addOrEditUserBox(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.deleteUser(t.row.user_id)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.pagation.total?s("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{background:"","current-page":e.pagation.page,"page-sizes":[10,15,20],"page-size":e.pagation.size,layout:"total, sizes, prev, pager, next",total:e.pagation.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),s("el-dialog",{attrs:{title:e.isAdd?"新增用户":"编辑用户",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.userModel?s("el-form",{ref:"ruleForm",attrs:{model:e.userModel,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"角色类型",prop:"user_type"}},[s("el-select",{attrs:{placeholder:"请选择角色类型"},model:{value:e.userModel.user_type,callback:function(t){e.$set(e.userModel,"user_type",t)},expression:"userModel.user_type"}},[s("el-option",{attrs:{label:"超级管理员",value:0}}),e._v(" "),s("el-option",{attrs:{label:"普通用户",value:1}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"性别：",prop:"gender"}},[s("el-radio-group",{model:{value:e.userModel.gender,callback:function(t){e.$set(e.userModel,"gender",t)},expression:"userModel.gender"}},[s("el-radio",{attrs:{size:"small",label:"男"}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{size:"small",label:"女"}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"账号名称：",prop:"user_name"}},[s("el-input",{attrs:{size:"small"},model:{value:e.userModel.user_name,callback:function(t){e.$set(e.userModel,"user_name",t)},expression:"userModel.user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"单位名称：",prop:"organization"}},[s("el-input",{attrs:{size:"small"},model:{value:e.userModel.organization,callback:function(t){e.$set(e.userModel,"organization",t)},expression:"userModel.organization"}})],1)],1):e._e(),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrEditUser("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},n=[],r=(s("e10e"),s("6d57"),s("c24f")),l=s("5f87"),i=s("bc3a"),o=s.n(i),c={data:function(){return{list:null,isAdd:!0,listLoading:!0,dialogVisible:!1,isBatchSelected:!1,pagation:{page:1,size:10,total:0},userModel:null,originUserModel:{user_id:null,user_name:null,gender:"男",organization:null,user_type:0},rules:{user_type:[{required:!0,message:"角色为必填项",trigger:"change"}],gender:[{required:!0,message:"性别不能为空",trigger:"change"}],user_name:[{required:!0,message:"账户为必填项",trigger:"blur"}],organization:[{required:!0,message:"公司名称为必填项",trigger:"blur"}]}}},computed:{tableHeight:function(){return document.documentElement.offsetHeight-220||300}},created:function(){this.fetchData()},methods:{transformDataTime:function(e){return o()(e).format("YYYY-MM-DD hh:mm:ss")},fetchData:function(){var e=this;return this.listLoading=!0,Object(r["j"])(this.pagation).then((function(t){e.list=t.data.list,e.pagation.total=t.data.total||e.list.length})).catch((function(t){e.list=[],e.pagation.total=0})).finally((function(){e.listLoading=!1,e.$refs.tableList.bodyWrapper.scrollTop=0}))},setUserModel:function(e){var t={};return Object.keys(this.originUserModel).forEach((function(s){return t[s]=e[s]})),t},addOrEditUserBox:function(e){this.dialogVisible=!0,this.isAdd=!e,this.userModel=e?this.setUserModel(e):this.setUserModel(this.originUserModel)},addOrEditUser:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var s=t.isAdd?r["a"]:r["c"];s(t.userModel).then((function(e){t.$message({type:"success",message:"".concat(t.isAdd?"新增":"编辑","用户成功!")}),t.fetchData(),t.isAdd||t.userModel.user_id!=l["b"]()||t.$store.dispatch("user/getInfo")})).catch((function(e){return t.$message({type:"error",message:"".concat(t.isAdd?"新增":"编辑","用户失败!")})})).finally((function(e){return t.dialogVisible=!1}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleClose:function(e){this.resetForm("ruleForm"),e instanceof Function?e():this.dialogVisible=!1},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])({user_id:e}).then((function(e){return t.fetchData()})).catch((function(e){return t.$message({type:"error",message:e})}))})).catch((function(e){}))},handleSizeChange:function(e){this.pagation.size=e,this.pagation.page=1,this.fetchData()},handleCurrentChange:function(e){this.pagation.page=e,this.fetchData()},getIndex:function(e){return(this.pagation.page-1)*this.pagation.size+e+1},handleSelectionChange:function(e){this.isBatchSelected=!!e.length},batchDelete:function(){var e=this;this.$confirm("此操作将永久删除选中的".concat(this.$refs.tableList.selection.length,"条数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$refs.tableList.selection.map((function(e){return e.user_id})).join();Object(r["b"])({user_id:t}).then((function(t){return e.fetchData()})).catch((function(t){return e.$message({type:"error",message:t})}))}))}},mounted:function(){}},d=c,u=s("4023"),f=Object(u["a"])(d,a,n,!1,null,null,null);t["default"]=f.exports},"6a0b":function(e,t,s){var a={"./af":"cf03","./af.js":"cf03","./ar":"67c8","./ar-dz":"8f5f","./ar-dz.js":"8f5f","./ar-kw":"8e87","./ar-kw.js":"8e87","./ar-ly":"c00e","./ar-ly.js":"c00e","./ar-ma":"afa9","./ar-ma.js":"afa9","./ar-sa":"5e8a","./ar-sa.js":"5e8a","./ar-tn":"1636","./ar-tn.js":"1636","./ar.js":"67c8","./az":"af09","./az.js":"af09","./be":"7ca1","./be.js":"7ca1","./bg":"6863","./bg.js":"6863","./bm":"140c","./bm.js":"140c","./bn":"c382","./bn.js":"c382","./bo":"7032","./bo.js":"7032","./br":"e366","./br.js":"e366","./bs":"cbff","./bs.js":"cbff","./ca":"59e4","./ca.js":"59e4","./cs":"20b3","./cs.js":"20b3","./cv":"67e6","./cv.js":"67e6","./cy":"3069","./cy.js":"3069","./da":"7f0f","./da.js":"7f0f","./de":"5857","./de-at":"1940","./de-at.js":"1940","./de-ch":"2b440","./de-ch.js":"2b440","./de.js":"5857","./dv":"1dfd","./dv.js":"1dfd","./el":"af7f","./el.js":"af7f","./en-au":"e808","./en-au.js":"e808","./en-ca":"1a76","./en-ca.js":"1a76","./en-gb":"5843","./en-gb.js":"5843","./en-ie":"8a48","./en-ie.js":"8a48","./en-il":"bf2e","./en-il.js":"bf2e","./en-in":"5a4d","./en-in.js":"5a4d","./en-nz":"4abd","./en-nz.js":"4abd","./en-sg":"ec8d","./en-sg.js":"ec8d","./eo":"3771","./eo.js":"3771","./es":"b48d","./es-do":"1a41","./es-do.js":"1a41","./es-us":"c4c8","./es-us.js":"c4c8","./es.js":"b48d","./et":"99dc","./et.js":"99dc","./eu":"0328","./eu.js":"0328","./fa":"fff0","./fa.js":"fff0","./fi":"2e08","./fi.js":"2e08","./fil":"1e29","./fil.js":"1e29","./fo":"0a88","./fo.js":"0a88","./fr":"bb83","./fr-ca":"1bcf","./fr-ca.js":"1bcf","./fr-ch":"9f8b","./fr-ch.js":"9f8b","./fr.js":"bb83","./fy":"61bb","./fy.js":"61bb","./ga":"1e90","./ga.js":"1e90","./gd":"1790","./gd.js":"1790","./gl":"8ad9","./gl.js":"8ad9","./gom-deva":"0b41","./gom-deva.js":"0b41","./gom-latn":"dda8","./gom-latn.js":"dda8","./gu":"f235","./gu.js":"f235","./he":"9cca","./he.js":"9cca","./hi":"1e5a","./hi.js":"1e5a","./hr":"789e","./hr.js":"789e","./hu":"7f09","./hu.js":"7f09","./hy-am":"50df","./hy-am.js":"50df","./id":"430a6","./id.js":"430a6","./is":"ce7a","./is.js":"ce7a","./it":"a868","./it-ch":"d183","./it-ch.js":"d183","./it.js":"a868","./ja":"09dc","./ja.js":"09dc","./jv":"794b","./jv.js":"794b","./ka":"05da","./ka.js":"05da","./kk":"249f","./kk.js":"249f","./km":"e0a7","./km.js":"e0a7","./kn":"c6be","./kn.js":"c6be","./ko":"06a0","./ko.js":"06a0","./ku":"e16a","./ku.js":"e16a","./ky":"8464","./ky.js":"8464","./lb":"90ad","./lb.js":"90ad","./lo":"261c","./lo.js":"261c","./lt":"0425","./lt.js":"0425","./lv":"3796","./lv.js":"3796","./me":"a2e0","./me.js":"a2e0","./mi":"78a0","./mi.js":"78a0","./mk":"f520","./mk.js":"f520","./ml":"2708","./ml.js":"2708","./mn":"dbc9","./mn.js":"dbc9","./mr":"310d","./mr.js":"310d","./ms":"c5b0","./ms-my":"4999","./ms-my.js":"4999","./ms.js":"c5b0","./mt":"ed87","./mt.js":"ed87","./my":"beb1","./my.js":"beb1","./nb":"0733","./nb.js":"0733","./ne":"f08c","./ne.js":"f08c","./nl":"ea3f","./nl-be":"bcfb","./nl-be.js":"bcfb","./nl.js":"ea3f","./nn":"e302","./nn.js":"e302","./oc-lnc":"06f4","./oc-lnc.js":"06f4","./pa-in":"3f8e","./pa-in.js":"3f8e","./pl":"c0f9","./pl.js":"c0f9","./pt":"b981","./pt-br":"cc2d","./pt-br.js":"cc2d","./pt.js":"b981","./ro":"ee58","./ro.js":"ee58","./ru":"2158","./ru.js":"2158","./sd":"d0d5","./sd.js":"d0d5","./se":"9b99","./se.js":"9b99","./si":"3a82","./si.js":"3a82","./sk":"68b1","./sk.js":"68b1","./sl":"5315","./sl.js":"5315","./sq":"14ae","./sq.js":"14ae","./sr":"f9b5","./sr-cyrl":"23b8","./sr-cyrl.js":"23b8","./sr.js":"f9b5","./ss":"73ef","./ss.js":"73ef","./sv":"5068","./sv.js":"5068","./sw":"444b","./sw.js":"444b","./ta":"eea9","./ta.js":"eea9","./te":"3975","./te.js":"3975","./tet":"4cfb","./tet.js":"4cfb","./tg":"cd74","./tg.js":"cd74","./th":"1846","./th.js":"1846","./tl-ph":"8657","./tl-ph.js":"8657","./tlh":"eeec","./tlh.js":"eeec","./tr":"a699","./tr.js":"a699","./tzl":"1b9c","./tzl.js":"1b9c","./tzm":"7bed","./tzm-latn":"2e6f","./tzm-latn.js":"2e6f","./tzm.js":"7bed","./ug-cn":"7610","./ug-cn.js":"7610","./uk":"4c63","./uk.js":"4c63","./ur":"4363","./ur.js":"4363","./uz":"51a4","./uz-latn":"a0eb","./uz-latn.js":"a0eb","./uz.js":"51a4","./vi":"ef1e","./vi.js":"ef1e","./x-pseudo":"7aa6","./x-pseudo.js":"7aa6","./yo":"b8f9f","./yo.js":"b8f9f","./zh-cn":"4b59","./zh-cn.js":"4b59","./zh-hk":"9c84","./zh-hk.js":"9c84","./zh-mo":"5f4e","./zh-mo.js":"5f4e","./zh-tw":"fbc2","./zh-tw.js":"fbc2"};function n(e){var t=r(e);return s(t)}function r(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="6a0b"}}]);