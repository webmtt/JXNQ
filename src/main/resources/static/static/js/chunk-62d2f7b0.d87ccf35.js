(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62d2f7b0"],{"329e":function(e,t,a){"use strict";var i=a("9360"),n=a.n(i);n.a},"5ada":function(e,t,a){"use strict";var i=a("ac35"),n=a.n(i);n.a},"5c1c":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var i="http://10.136.5.68:20002/api/pie-cloud/layerData/layerTemplates?key=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpbmZvIjoie1widXNlcklkXCI6XCIxXCIsXCJrZXlcIjpcIjE0ZTIxMmRlYWRlZGE0NjU0NGQzMmExODdiMTE2ODkxXCJ9In0.MX897rlEz448Nea2K-W-X4vHqIxDnAm16Wds6l27BYw&id=",n={landManage:{scenceUrl:i+"2c92808c71bafa7a01720c0fc70f00e6",scenceName:"landManage",checkType:"checkBox"},growManage:{scenceUrl:i+"2c92808c71bafa7a01720c456bda00f4",scenceName:"growManage",checkType:"checkBox"},vegetationManage:{scenceUrl:i+"2c92808c71bafa7a01720c461f7200f6",scenceName:"vegetationManage",checkType:"checkBox"},meteorologicalService:{scenceUrl:i+"2c92808c71bafa7a01720c46dc7300f8",scenceName:"meteorologicalService",checkType:"checkBox"}},s={image:i+"2c92808c71bafa7a01720c4bb44500fb",street:i+"2c92808c71bafa7a01720c4d303900fd"}},9360:function(e,t,a){},ac35:function(e,t,a){},daf2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container vegetationManage monitor",staticStyle:{display:"flex","flex-direction":"column"}},[a("el-button-group",{staticClass:"classTab"},[a("el-button",{attrs:{type:"default",size:"small"}},[a("router-link",{attrs:{to:"/landManage"}},[e._v("田地管理")])],1),e._v(" "),a("el-button",{attrs:{type:"default",size:"small"}},[a("router-link",{attrs:{to:"/growManage"}},[e._v("长势管理")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"}},[a("router-link",{attrs:{to:"/vegetationManage"}},[e._v("植被管理")])],1),e._v(" "),a("el-button",{attrs:{type:"default",size:"small"}},[a("router-link",{attrs:{to:"/meteorologicalService"}},[e._v("气象服务")])],1)],1),e._v(" "),a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"showContent"},[a("div",{staticClass:"contentTitle"},[a("span",[e._v("植被覆盖情况")]),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){e.dialogFormVisible=!0}}})]),e._v(" "),a("div",{staticClass:"contentGraph",staticStyle:{display:"flex","align-items":"center"}},[a("el-table",{ref:"detailTable",staticStyle:{width:"100%"},attrs:{height:"250px","row-style":e.setRowStyle,data:e.tableData,"empty-text":"无",border:"","show-header":!1}},[a("el-table-column",{attrs:{prop:"date",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"地址"}})],1)],1)]),e._v(" "),a("div",{staticClass:"showContent"},[e._m(0),e._v(" "),a("div",{ref:"coverRate",staticClass:"contentGraph"})])]),e._v(" "),a("el-dialog",{staticClass:"feedbackEdit",attrs:{"close-on-click-modal":!1,top:"25vh",title:"编辑植被覆盖情况",width:"400px",modal:!1,"append-to-body":!0,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"影像源：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.imageSrc,callback:function(t){e.$set(e.form,"imageSrc",t)},expression:"form.imageSrc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总体描述：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.imageDesc,callback:function(t){e.$set(e.form,"imageDesc",t)},expression:"form.imageDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"影响分析：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.imageAnalysis,callback:function(t){e.$set(e.form,"imageAnalysis",t)},expression:"form.imageAnalysis"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.setDetail}},[e._v(e._s(e.loading?"更新中":"确 定"))])],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentTitle"},[a("span",[e._v("植被覆盖率变化")])])}],s=(a("2aa3"),a("06a2"),a("ec25"),a("5c62")),o=(a("6d57"),a("e10e"),a("9a33"),a("c904"),a("9dd9"),a("24ce")),r=a.n(o),l=a("5c1c"),c={tooltip:{trigger:"axis"},color:["#ff8763","#a2f774","#62f3dd"],legend:{right:0,top:5,icon:"circle",itemWidth:7,textStyle:{color:"#fff"}},textStyle:{color:"#fff"},grid:{left:"0%",right:"8%",bottom:"5%",top:"20%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#fff"}},splitLine:{show:!0,lineStyle:{type:"solid",color:"#666"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}},splitLine:{show:!1}},dataset:{source:{}},series:[{type:"line",lineStyle:{width:1}},{type:"line",lineStyle:{width:1}},{type:"line",lineStyle:{width:1}}]},u=(a("1cfa"),a("f483")),d={data:function(){return{dialogFormVisible:!1,loading:!1,form:{id:"",imageSrc:"",imageDesc:"",imageAnalysis:""},formLabelWidth:"85px",bussinessLayers:[],conditionModel:{timeValue:null},value:"",tableData:[]}},methods:{setDetail:function(){var e=this;this.loading=!0,Object(u["c"])(this.form,{"Content-Type":"application/json"}).then((function(t){e.dialogFormVisible=!1,e.getLayerDetails(e.currentShowLayers[0]),e.$message({type:"success",message:"编辑成功!"})})).catch((function(t){return e.$message({type:"error",message:"编辑成功!"})})).finally((function(t){return e.loading=!1}))},getShowLayers:function(){var e=this,t=this.bussinessLayers.filter((function(t){return new RegExp("".concat(e.conditionModel.timeValue)).test(t.id)})).map((function(e){return e.id})),a=t.map((function(e){return{key:parseInt(e.split("_")[2]+e.split("_")[3]),value:e}})).sort((function(e,t){return e.key-t.key})),i=a.map((function(e){return e.value}));return this.$store.dispatch("map/changePlayLayers",{key:"playLayers",value:i}),[i[0]]},showLineCharts:function(){var e=r.a.init(this.$refs.coverRate);Object(u["b"])({year:this.conditionModel.timeValue}).then((function(t){var a=Object.keys(t.data).filter((function(e){return"season"!=e})),i=[["时间"].concat(Object(s["a"])(a))].concat(Object(s["a"])(t.data.season.map((function(e,i){var n=a.map((function(e,a){return t.data[e][i]}));return n.unshift(e),n}))));c.dataset.source=i,e.setOption(c)}))},getLayerDetails:function(e){var t=this;Object(u["a"])({imageName:e}).then((function(e){t.form=Object.assign({},e.data),t.tableData=[{date:"影像源：",name:e.data.imageSrc||"-"},{date:"总体描述：",name:e.data.imageDesc||"-"},{date:"影响分析：",name:e.data.imageAnalysis||"-"}]}))},setRowStyle:function(e){var t=Math.floor(parseInt(this.$refs.detailTable.height)/6);return{height:0==e.rowIndex?"".concat(t,"px"):1==e.rowIndex?"".concat(2*t,"px"):"".concat(2.9*t,"px")}}},computed:{currentShowLayers:function(){return this.$store.state.map.showLayers}},watch:{conditionModel:{handler:function(e){if(this.conditionModel.timeValue){var t=this.getShowLayers();this.$store.dispatch("map/changeActiveLayers",{key:"showLayers",value:t}),this.$store.dispatch("map/changeLengendLayers",{key:"lengendLayers",value:[]}),this.showLineCharts()}},deep:!0,immediate:!0},currentShowLayers:function(e){this.getLayerDetails(e[0])}},mounted:function(){var e=this;fetch(l["b"][this.$route.path.slice(1)].scenceUrl).then((function(e){return e.json()})).then((function(t){e.bussinessLayers=t.layers.filter((function(e){return["植被覆盖"].indexOf(e.id.split("_")[0])>-1})),e.timeOptions=Array.from(new Set(e.bussinessLayers.map((function(e){return e.id.split("_")[1]})))).map((function(e){return{value:e,label:e}})),e.conditionModel.timeValue=e.timeOptions[0].value,e.$store.dispatch("map/changeBusinessLayers",{key:"businessLayers",value:e.bussinessLayers.map((function(e){return e.id}))}),e.$store.dispatch("map/changePlayYears",{key:"playerYears",value:e.timeOptions})}))}},f=d,m=(a("5ada"),a("329e"),a("4023")),p=Object(m["a"])(f,i,n,!1,null,"493a4ac4",null);t["default"]=p.exports},f483:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return o}));var i=a("829b");function n(e){return Object(i["a"])({url:"/plantCover/coverRate",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/plantCover/imageQuery",method:"get",params:e})}function o(e,t){return Object(i["a"])({url:"/plantCover/infoInput",method:"post",data:e,headers:t})}}}]);